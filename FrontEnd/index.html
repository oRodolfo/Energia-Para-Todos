<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Energia para Todos</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
  <link rel="stylesheet" href="assets/css/styles.css">
  <style>
    @keyframes slideInRight {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    /* Card de Dashboard Logado */
    .card-dashboard-logado {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: linear-gradient(135deg, #ff9500, #ffd34d);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 0 30px rgba(255, 149, 0, 0.4);
      max-width: 300px;
      animation: slideInRight 0.5s ease-out;
    }

    .card-dashboard__titulo {
      color: #211c29;
      font-weight: 800;
      font-size: 1.1rem;
      margin-bottom: 8px;
    }

    .card-dashboard__nome {
      color: #211c29;
      font-size: 0.95rem;
      margin-bottom: 14px;
    }

    .card-dashboard__botao {
      width: 100%;
      padding: 12px 16px;
      background: #211c29;
      color: #ff9500;
      border: none;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.95rem;
    }

    .card-dashboard__botao:hover {
      transform: scale(1.05);
    }

    .card-dashboard__botao:active {
      transform: scale(1);
    }

    /* Responsivo */
    @media (max-width: 480px) {
      .card-dashboard-logado {
        top: 10px;
        right: 10px;
        max-width: calc(100% - 20px);
        padding: 16px;
      }

      .card-dashboard__titulo {
        font-size: 1rem;
      }

      .card-dashboard__nome {
        font-size: 0.9rem;
      }

      .card-dashboard__botao {
        padding: 10px 14px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>

<body>
  <header class="header" role="banner">
    <div class="container">
      <a href="#inicio" class="logo" aria-label="Energia para Todos Home">‚ö° Energia para Todos</a>
      <nav class="nav" role="navigation" aria-label="Menu Principal">
        <ul class="nav__list">
          <li><a href="#inicio" class="nav__link">In√≠cio</a></li>
          <li><a href="#impacto" class="nav__link">Impacto</a></li>
          <li><a href="#sobre" class="nav__link">Sobre</a></li>
          <li><a href="#como-funciona" class="nav__link">Como Funciona</a></li>
          <li><a href="#duvida" class="nav__link">D√∫vidas frequentes</a></li>
          <li><a href="login.html" class="nav__link login_btn">Login</a></li>
        </ul>
      </nav>
      <button id="mobile_btn" aria-label="Abrir menu mobile" aria-controls="mobile_menu" aria-expanded="false">
        <i data-feather="menu"></i>
      </button>
    </div>
    <nav id="mobile_menu" class="mobile_menu" aria-label="Menu Mobile" tabindex="-1">
      <ul id="mobile_nav_list">
        <li class="nav_item"><a href="#inicio">In√≠cio</a></li>
        <li class="nav_item"><a href="#impacto">Impacto</a></li>
        <li class="nav_item"><a href="#sobre">Sobre</a></li>
        <li class="nav_item"><a href="#como-funciona">Como Funciona</a></li>
        <li class="nav_item"><a href="#duvida">D√∫vidas frequentes</a></li>
      </ul>
      <a href="login.html" class="btn btn--neon" style="margin-top:1rem;">Login</a>
    </nav>
  </header>

  <main>
    <!-- Card de Bem-vindo para Usu√°rio Logado -->
    <div id="card-dashboard-logado" class="card-dashboard-logado" style="display: none;">
      <div class="card-dashboard__titulo">üëã Bem-vindo de volta!</div>
      <div id="nome-usuario-card" class="card-dashboard__nome"></div>
      <button id="btn-acessar-dashboard" class="card-dashboard__botao">
        Acessar seu Dashboard
      </button>
    </div>

    <section class="hero" id="inicio">
      <div class="container hero__content">
        <h1 class="hero__title">
          Transforme Energia em <span class="hero__title-line--neon">Esperan√ßa</span>
        </h1>
        <p class="hero__subtitle">Conectamos quem tem excedente de energia solar com comunidades carentes, criando uma rede solid√°ria que ilumina vidas.</p>
        <div class="hero__actions">
          <a href="login.html" class="btn btn--neon">Doe Agora</a>
          <a href="ods.html" class="btn btn--outline-neon">ODS 7 - Saiba Mais</a>
        </div>
      </div>
    </section>

    <section class="impact" id="impacto">
      <div class="container">
        <span class="section__label">Nosso Impacto</span>
        <h2 class="section__title">Energia transformando vidas</h2>
        <div class="impact__stats">
          <div class="impact__stat"><h4>1.2M kWh</h4><p>Distribu√≠dos</p></div>
          <div class="impact__stat"><h4>850</h4><p>Fam√≠lias atendidas</p></div>
          <div class="impact__stat"><h4>120</h4><p>Comunidades alcan√ßadas</p></div>
        </div>
      </div>
    </section>

    <section class="mission" id="sobre">
      <div class="container">
        <span class="section__label">Nossa Miss√£o</span>
        <h2 class="section__title">Democratiza√ß√£o do acesso √† <span class="highlight">energia limpa</span></h2>
        <p class="section__description">Promovemos inclus√£o energ√©tica conectando doadores a fam√≠lias em vulnerabilidade social.</p>
        <div class="mission__features">
          <div class="feature">
            <i data-feather="sun" class="feature__icon"></i>
            <h4>Sustentabilidade</h4>
            <p>Reduzindo a pegada de carbono e promovendo um futuro mais verde.</p>
          </div>
          <div class="feature">
            <i data-feather="heart" class="feature__icon"></i>
            <h4>Solidariedade</h4>
            <p>Conectando pessoas e comunidades para gerar impacto positivo.</p>
          </div>
          <div class="feature">
            <i data-feather="cpu" class="feature__icon"></i>
            <h4>Inova√ß√£o</h4>
            <p>Usando tecnologia de ponta para otimizar a distribui√ß√£o de energia.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="gallery" id="galeria">
      <div class="container">
        <span class="section__label">Nossa Realidade</span>
        <h2 class="section__title">Iluminando Comunidades</h2>
        <div class="gallery__grid">
          <div class="gallery__item" tabindex="0" aria-label="Instalando esperan√ßa ">
            <img src="/assets/images/imagem2.jpg" alt="Crian√ßas sorrindo em comunidade">
            <div class="gallery__overlay">Instalando esperan√ßa</div>
          </div>
          <div class="gallery__item" tabindex="0" aria-label="Energia que transforma lares">
            <img src="/assets/images/imagem3.jpg" alt="Painel solar sendo instalado em telhado">
            <div class="gallery__overlay">Energia que transforma lares</div>
          </div>
          <div class="gallery__item" tabindex="0" aria-label="O poder da tecnologia dentro da Sustentabilidade">
            <img src="/assets/images/i.a img.png" alt="M√£os segurando uma l√¢mpada acesa">
            <div class="gallery__overlay">O poder da tecnologia dentro da Sustentabilidade</div>
          </div>
        </div>
      </div>
    </section>

    <section class="how-it-works" id="como-funciona">
      <div class="container">
        <span class="section__label">Como Funciona</span>
        <h2 class="section__title">Energia que gera <span class="highlight">impacto real</span></h2>
        <div class="steps">
          <div class="step">
            <i data-feather="user-plus" class="step__icon"></i>
            <h3>1. Cadastro do Doador</h3>
            <p>Empresas e pessoas com sistemas de energia renov√°vel se cadastram em nossa plataforma de forma simples e r√°pida.</p>
          </div>
          <div class="step">
            <i data-feather="bar-chart-2" class="step__icon"></i>
            <h3>2. An√°lise e C√°lculo</h3>
            <p>Nossa IA analisa os dados de gera√ß√£o e calcula o excedente de energia que pode ser doado sem custos para o gerador.</p>
          </div>
          <div class="step">
            <i data-feather="send" class="step__icon"></i>
            <h3>3. Distribui√ß√£o Inteligente</h3>
            <p>O excedente √© convertido em cr√©ditos e distribu√≠do para fam√≠lias cadastradas, reduzindo suas contas de luz.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="contact" id="duvida">
      <div class="container">
        <span class="section__label">D√∫vidas frequentes</span>
        <h2 class="section__title">Fa√ßa parte da mudan√ßa</h2>
        <p class="section__description">
          Esclare√ßa suas d√∫vidas e entre para essa iniciativa que transforma vidas.  
          Veja abaixo as perguntas mais comuns e, se preferir, fale com a gente pelo formul√°rio.
        </p>

        <!-- FAQ  -->
        <div class="faq" style="max-width: 900px; margin: 3rem auto;">
          <div class="faq__item">
            <button class="faq__question" aria-expanded="false">
              <span>‚ùì Como funciona a doa√ß√£o de energia?</span>
              <i data-feather="chevron-down"></i>
            </button>
            <div class="faq__answer">
              <p>A energia excedente do seu painel solar √© convertida em cr√©ditos e repassada automaticamente √†s fam√≠lias cadastradas.</p>
            </div>
          </div>

          <div class="faq__item">
            <button class="faq__question" aria-expanded="false">
              <span>üí∞ Existem custos para o doador?</span>
              <i data-feather="chevron-down"></i>
            </button>
            <div class="faq__answer">
              <p>N√£o! A opera√ß√£o √© totalmente gratuita ‚Äî voc√™ contribui apenas com o excedente que j√° teria naturalmente.</p>
            </div>
          </div>

          <div class="faq__item">
            <button class="faq__question" aria-expanded="false">
              <span>üë®‚Äçüë©‚Äçüëß Quem recebe a energia?</span>
              <i data-feather="chevron-down"></i>
            </button>
            <div class="faq__answer">
              <p>Fam√≠lias em situa√ß√£o de vulnerabilidade e comunidades cadastradas conforme crit√©rios sociais e energ√©ticos.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer role="contentinfo">
    <div class="container">
      <p>¬© 2025 Energia Solid√°ria - Todos os direitos reservados</p>
    </div>
  </footer>

  <!-- SCRIPT PARA DETEC√á√ÉO DE USU√ÅRIO LOGADO -->
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      await verificarUsuarioLogado();
    });

    async function verificarUsuarioLogado() {
      try {
        const resp = await fetch('/api/meu-perfil');
        const data = await resp.json();

        if (data.sucesso && data.usuario_id) {
          // Usu√°rio est√° logado - mostrar card
          const cardDashboard = document.getElementById('card-dashboard-logado');
          const nomeUsuarioCard = document.getElementById('nome-usuario-card');
          const btnAcessarDashboard = document.getElementById('btn-acessar-dashboard');

          if (cardDashboard && nomeUsuarioCard && btnAcessarDashboard) {
            nomeUsuarioCard.textContent = `Ol√°, ${data.nome}!`;
            cardDashboard.style.display = 'block';

            // Configurar clique do bot√£o para ir ao dashboard apropriado
            btnAcessarDashboard.addEventListener('click', () => {
              if (data.tipo === 'BENEFICIARIO') {
                window.location.href = '/painel-beneficiario';
              } else if (data.tipo === 'DOADOR') {
                window.location.href = '/painel-doador';
              } else {
                // Fallback para p√°gina padr√£o
                window.location.href = '/';
              }
            });
          }
        }
      } catch (err) {
        console.log('Usu√°rio n√£o logado - p√°gina inicial normal');
      }
    }
  </script>

  <script src="/assets/js/main.js"></script>
</body>
</html>